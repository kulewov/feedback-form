function insertNodeText(a,b){let c=document.createTextNode(b);return a.appendChild(c),a}function insertButton(a,b,c){let d=[,,];for(let e=0;e<d.length;e++){let d=document.createElement("div"),f=e===c?b+b:b;d.classList.add("button"),d=insertNodeText(d,f),d.onclick=controlButton,a.appendChild(d)}}function getCountDay(a){let b=[31,28,31,30,31,30,31,31,30,31,30,31];return 0==date.getFullYear()%4&&b[1]++,b[a]}function getCountWeek(a){return a.setDate(1),Math.ceil((getCountDay(a.getMonth())+getNumberDay(a))/7)}function getNumberDay(a){return[6,0,1,2,3,4,5][a.getDay()]}function getNumberFirstDay(a){return a.setDate(1),getNumberDay(a)}function controlButton(){if(1===this.lastChild.nodeValue.length){let a="<"===this.lastChild.nodeValue?date.getTime()-86400000*date.getDate():date.getTime()+86400000*(getCountDay(date.getMonth())-date.getDate()+1);date.setTime(a)}else{let a="<<"===this.lastChild.nodeValue?date.getFullYear()-1:date.getFullYear()+1;date.setFullYear(a)}generateCalendar()}function createTable(){let a=["\u041F","\u0412","\u0421","\u0427","\u041F","\u0421","\u0412"],b=container.querySelector("#date_birth"),c=document.createElement("div");b=b.closest(".input-container"),b.appendChild(c),c.setAttribute("id","calendar"),c.className="calendar-wrapper";let d=document.createElement("table");c.appendChild(d),d.setAttribute("align","center"),d.setAttribute("cellpadding","0"),d.setAttribute("cellspacing","0");let e=d.insertRow(-1);e.setAttribute("id","first-child");let f=e.insertCell(-1);f.setAttribute("colspan","2"),f.className="lalign",f=insertButton(f,"<",0),f=e.insertCell(-1),f.setAttribute("colspan","3"),f=e.insertCell(-1),f.setAttribute("colspan","2"),f.className="ralign",f=insertButton(f,">",1),e=d.insertRow(-1),e.className="day";for(let b=0;7>b;b++)f=e.insertCell(-1),f=insertNodeText(f,a[b]),6==b&&(f.style.color="#ee0000")}function generateCalendar(){let a=document.getElementById("calendar"),b=a.getElementsByTagName("table")[0],c=["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"];for(b.rows[0].cells[1].innerHTML=c[date.getMonth()]+" "+date.getFullYear();2<b.rows.length;)b.deleteRow(b.rows.length-1);let d=!1,e=1;for(let a,c=0;c<getCountWeek(date);c++){a=b.insertRow(-1);for(let b=0;7>b;b++)cell=a.insertCell(-1),b===getNumberFirstDay(date)&&(d=!0),d&&e<=getCountDay(date.getMonth())?(cell=insertNodeText(cell,e),cell.onclick=function(){document.getElementById("calendar").style.display="none",date.setDate(this.lastChild.nodeValue);let a=10>date.getDate()?"0"+date.getDate():date.getDate(),b=10>date.getMonth()+1?"0"+(date.getMonth()+1):date.getMonth()+1;input.value=a+"."+b+"."+date.getFullYear(),input.classList.toggle("hidden")},cell.onmouseover=function(){colorClear=this.className,this.className="select"},cell.onmouseout=function(){this.className=colorClear},cell.className=6===b?"sunday":"default-day",curDate.getFullYear()===date.getFullYear()&&curDate.getMonth()===date.getMonth()&&curDate.getDate()===e&&(cell.className="curr-day"),e++):(cell.style.border="none",cell=insertNodeText(cell," "))}}function showcalendar(a){input=a;let b=document.getElementById("calendar");if(""!==input.value){let a=input.value.split(".");date=new Date(a[2],a[1]-1,a[0])}generateCalendar(),b.style.display="block"===b.style.display?"none":"block"}function phoneMask(a,b=""){let c=a.replace(/\./g,""),d=/\+\d*/,f="",g="";document.addEventListener("input",a=>{let e=a.target;if(e.classList.contains(c)){f=d.exec(b),g=d.test(b)?f[0].length:"";let a=0,c=/^\D{1}/,h=/^([^+]+)/,i=/^([^(])/,j=b.replace(/[0\D]/g,""),k=e.value.replace(/\D/g,"");if(c.test(e.value)&&1===e.value.length)return e.value.replace(c,"");if(k.length<j.length)return void(e.value="");if(j.length>=k.length&&(k=j),/\+\d{1,3}\s?\(\d{1,3}\)\s?\d{1,3}\D\d{1,2}\D\d{1,2}/.test(e.value)||!f&&/\(\d{1,3}\)\s?\d{1,3}\D\d{1,2}\D\d{1,2}/.test(e.value))return h.test(e.value)&&f&&(e.value=e.value.replace(h,"")),i.test(e.value)&&!f&&(e.value=e.value.replace(i,"")),void((/\D\d(\s|\D)+$/.test(e.value)||e.value.length>b.length)&&(e.value=e.value.substring(0,e.value.length-1)));e.value=b.replace(/./g,b=>/[\d]/.test(b)&&a<k.length?k.charAt(a++):a>=k.length?"":b)}}),document.addEventListener("click",a=>{let b=a.target;if(b.classList.contains(c)){let a=b.selectionStart;a<=g&&b.setSelectionRange(b.value.length,b.value.length)}}),document.addEventListener("focus",a=>{let b=a.target;b.classList.contains(c)&&(b.value.length<=g&&(b.value=f?f:""),setTimeout(()=>{b.setSelectionRange(b.value.length,b.value.length)},10))},!0),document.addEventListener("blur",a=>{let b=a.target;b.classList.contains(c)&&b.value.length<=g&&(b.value="")},!0)}let countEl,elements,date,curDate,colorClear,input,container,form,curIndex=0,prevIndex=0;addEventListener("load",function(){function a(){countEl=form.elements.length,elements=form.getElementsByClassName("feed-inner"),curDate=date=new Date,createTable(),phoneMask(".js-feed-phone","+7(000) 000-00-00",!0,!0,!0)}function b(a){let b={};for(let c in a.elements){let d=a.elements[c].name,e=a.elements[c].value;e&&d&&(b[d]=e)}return b}function c(a){let b=a.classList.contains("next");return b?void d():void g()}function d(){if(curIndex+1!==countEl){if(!e())return void f("set");let a=container.querySelector(`.nav_arrow.prev`);a.classList.contains("hidden")&&h("prev"),prevIndex=curIndex,curIndex++,curIndex+1===countEl&&h("next"),i()}}function e(){let a=elements[curIndex],b=a.dataset.required;return!(b&&""===a.value)}function f(a="delete"){let b=elements[curIndex];if("set"===a){b.classList.add("has-error");let a=document.createElement("div"),c=document.createElement("div");return a.classList.add("error-wrapper"),c.classList.add("error"),c.innerHTML=form.dataset.requireMessage,a.appendChild(c),void b.insertAdjacentElement("afterend",a)}b.classList.remove("has-error");let c=container.querySelector(".error-wrapper");c&&c.remove()}function g(){if(0!==curIndex){let a=container.querySelector(`.nav_arrow.next`);a.classList.contains("hidden")&&h("next"),prevIndex=curIndex,curIndex--,0===curIndex&&h("prev"),i()}}function h(a){let b=container.querySelector(`.nav_arrow.${a}`);b.classList.toggle("hidden")}function i(){let a=elements[curIndex],b=elements[prevIndex];a=a.closest(".input-container"),b=b.closest(".input-container"),b.classList.remove("active"),b.classList.add("collapse"),a.classList.remove("collapse"),a.classList.add("active")}if(container=document.querySelector("#feed_form"),form=container.querySelector("form"),!!form){document.addEventListener("click",function(a){let b=a.target;b.classList.contains("nav_arrow")&&c(b),b.classList.contains("feed-inner")&&f()});let d=container.querySelector("#date_birth");d.addEventListener("click",function(){this.classList.toggle("hidden"),showcalendar(this)}),form.addEventListener("submit",function(a){a.preventDefault();let c=b(a.target);fetch("sendform.php",{method:"POST",body:new URLSearchParams(c),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).then(a=>a.json()).then(a=>{console.log(a)})}),a()}});